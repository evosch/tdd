{"version":3,"sources":["../../src/server/services/http-router.js"],"names":["request","response","method","methodMapper","route","url","pathname","action","console","log","service","HttpRouter","GET","POST","PUT","DELETE","register"],"mappings":";;AAUA;;;;;;;qEAMA,iBAA0BA,OAA1B,EAAmCC,QAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AACQC,kBADR,GACiBC,aAAaH,QAAQE,MAArB,CADjB;AAEQE,iBAFR,GAEgBJ,QAAQK,GAAR,CAAYC,QAF5B;;AAAA,gBAIO,iBAAOF,KAAP,CAJP;AAAA;AAAA;AAAA;;AAAA,6CAKW,KALX;;AAAA;AAOQG,kBAPR,GAOiB,iBAAOH,KAAP,CAPjB;;;AASEI,oBAAQC,GAAR,cAAuBF,MAAvB,SAAiCL,MAAjC;;AATF;AAAA,mBAWQ,kBAAQQ,OAAR,CAAgB,eAAhB,EAAiCV,OAAjC,EAA0CC,QAA1C,CAXR;;AAAA;AAAA,6CAaS,kBAAQS,OAAR,CAAmBH,MAAnB,SAA6BL,MAA7B,EAAuCF,OAAvC,EAAgDC,QAAhD,CAbT;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;kBAAeU,U;;;;;AAhBf;;;;AACA;;;;;;;;AAEA,IAAMR,eAAe;AACnBS,OAAK,MADc;AAEnBC,QAAM,QAFa;AAGnBC,OAAK,QAHc;AAInBC,UAAQ;AAJW,CAArB;;AA6BA,kBAAQC,QAAR,CAAiB,iBAAjB,EAAoCL,UAApC;AACA,kBAAQK,QAAR,CAAiB,mBAAjB,EAAsCL,UAAtC;AACA,kBAAQK,QAAR,CAAiB,mBAAjB,EAAsCL,UAAtC;AACA,kBAAQK,QAAR,CAAiB,mBAAjB,EAAsCL,UAAtC","file":"http-router.js","sourcesContent":["import gateway from '../gateway';\nimport routes from '../routes';\n\nconst methodMapper = {\n  GET: 'read',\n  POST: 'create',\n  PUT: 'update',\n  DELETE: 'delete',\n};\n\n/**\n * Route Http calls to the correct service\n * @param {*} request the request object\n * @param {*} response the response object\n * @returns {void}\n */\nasync function HttpRouter(request, response) {\n  const method = methodMapper[request.method];\n  const route = request.url.pathname;\n\n  if (!routes[route]) {\n    return false;\n  }\n  const action = routes[route];\n\n  console.log(`calling ${action}:${method}`);\n\n  await gateway.service('router:before', request, response);\n\n  return gateway.service(`${action}:${method}`, request, response);\n}\n\ngateway.register('entrypoint:read', HttpRouter);\ngateway.register('entrypoint:create', HttpRouter);\ngateway.register('entrypoint:update', HttpRouter);\ngateway.register('entrypoint:delete', HttpRouter);\n"]}