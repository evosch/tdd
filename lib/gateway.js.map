{"version":3,"sources":["../src/server/gateway.js"],"names":["services","register","name","service","push","args","console","log","length","reduce","promise","then","result","call","Promise","resolve"],"mappings":";;;;;;AAAA;;;;AAEA,IAAMA,WAAW,EAAjB;;kBAEe;AACbC,UADa,oBACJC,IADI,EACEC,OADF,EACW;AACtB,QAAI,OAAOH,SAASE,IAAT,CAAP,KAA0B,WAA9B,EAA2C;AACzCF,eAASE,IAAT,IAAiB,EAAjB;AACD;AACDF,aAASE,IAAT,EAAeE,IAAf,CAAoBD,OAApB;AACD,GANY;AAQbA,SARa,mBAQLD,IARK,EAQU;AAAA,sCAANG,IAAM;AAANA,UAAM;AAAA;;AACrB,QAAI,CAACL,SAASE,IAAT,CAAL,EAAqB;AACnBI,cAAQC,GAAR,gCAAyCL,IAAzC;AACA,aAAO,KAAP;AACD;AACDI,YAAQC,GAAR,cAAuBL,IAAvB,UAAgCF,SAASE,IAAT,EAAeM,MAA/C;AACA,WAAOR,SAASE,IAAT,EAAeO,MAAf,CAAsB,UAACC,OAAD,EAAUP,OAAV;AAAA,aAAsBO,QAAQC,IAAR,CAAa,UAACC,MAAD,EAAY;AAC1E,YAAIA,WAAW,KAAf,EAAsB;AACpBN,kBAAQC,GAAR,gBAAyBJ,QAAQD,IAAjC;AACA,iBAAOC,QAAQU,IAAR,iBAAa,IAAb,4BAAsBR,IAAtB,GAAP;AACD;AACD,eAAOO,MAAP;AACD,OANkD,CAAtB;AAAA,KAAtB,EAMHE,QAAQC,OAAR,CAAgB,KAAhB,CANG,CAAP;AAOD;AArBY,C","file":"gateway.js","sourcesContent":["import 'babel-polyfill';\n\nconst services = {};\n\nexport default {\n  register(name, service) {\n    if (typeof services[name] === 'undefined') {\n      services[name] = [];\n    }\n    services[name].push(service);\n  },\n\n  service(name, ...args) {\n    if (!services[name]) {\n      console.log(`no service registered for ${name}`);\n      return false;\n    }\n    console.log(`running ${name} (${services[name].length})`);\n    return services[name].reduce((promise, service) => promise.then((result) => {\n      if (result === false) {\n        console.log(`- calling ${service.name}`);\n        return service.call(null, ...args);\n      }\n      return result;\n    }), Promise.resolve(false));\n  },\n};\n\n"]}